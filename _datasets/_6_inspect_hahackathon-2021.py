"""Generated by GPT-5.1, reviewed by Shiling Deng, 26/11/2025"""
import os
import pandas as pd
import matplotlib.pyplot as plt

DATA_PATH = "download_cache/hahackathon-2021/datasets/hahackathon_train.csv"
OUT_DIR = "hahackathon_figs"


def main():
    os.makedirs(OUT_DIR, exist_ok=True)

    # 1. Load dataset
    df = pd.read_csv(DATA_PATH)

    print("Columns:", df.columns.tolist())

    # ------------------------
    # is_humor (binary 0/1)
    # ------------------------
    plt.figure()
    counts_is_humor = df["is_humor"].value_counts().sort_index()
    counts_is_humor.plot(kind="bar")
    plt.title("Distribution of is_humor")
    plt.xlabel("is_humor")
    plt.ylabel("Count")
    plt.xticks(rotation=0)
    plt.tight_layout()
    out_path = os.path.join(OUT_DIR, "is_humor_distribution.png")
    plt.savefig(out_path, dpi=300)
    plt.close()
    print(f"Saved: {out_path}")

    # ------------------------
    # humor_rating (continuous [1, 5])
    # ------------------------
    plt.figure()
    df["humor_rating"].hist(bins=20)
    plt.title("Distribution of humor_rating")
    plt.xlabel("humor_rating")
    plt.ylabel("Count")
    plt.tight_layout()
    out_path = os.path.join(OUT_DIR, "humor_rating_distribution.png")
    plt.savefig(out_path, dpi=300)
    plt.close()
    print(f"Saved: {out_path}")

    # ------------------------
    # humor_controversy (binary 0/1)
    # ------------------------
    plt.figure()
    counts_humor_controversy = df["humor_controversy"].value_counts().sort_index()
    counts_humor_controversy.plot(kind="bar")
    plt.title("Distribution of humor_controversy")
    plt.xlabel("humor_controversy")
    plt.ylabel("Count")
    plt.xticks(rotation=0)
    plt.tight_layout()
    out_path = os.path.join(OUT_DIR, "humor_controversy_distribution.png")
    plt.savefig(out_path, dpi=300)
    plt.close()
    print(f"Saved: {out_path}")

    # ------------------------
    # offense_rating (continuous [0, 5])
    # ------------------------
    plt.figure()
    df["offense_rating"].hist(bins=20)
    plt.title("Distribution of offense_rating")
    plt.xlabel("offense_rating")
    plt.ylabel("Count")
    plt.tight_layout()
    out_path = os.path.join(OUT_DIR, "offense_rating_distribution.png")
    plt.savefig(out_path, dpi=300)
    plt.close()
    print(f"Saved: {out_path}")


if __name__ == "__main__":
    main()
